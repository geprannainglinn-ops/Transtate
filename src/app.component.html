<div class="flex flex-col h-full max-w-md mx-auto w-full bg-slate-50 relative">
  
  <!-- Header -->
  <header class="p-6 pt-10 text-center z-10">
    <h1 class="text-2xl font-bold text-slate-800 mb-1">Burmese Translator</h1>
    <p class="text-sm text-slate-500">Speak Burmese, hear English & Chinese</p>
  </header>

  <!-- Main Content Area -->
  <main class="flex-1 overflow-y-auto px-6 pb-32 scrollbar-hide">
    
    <!-- Welcome State -->
    @if (!result() && !processing()) {
      <div class="h-full flex flex-col items-center justify-center opacity-60">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-24 w-24 text-slate-300 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" />
        </svg>
        <p class="text-slate-400 text-center px-8">Tap the microphone below and start speaking in Burmese.</p>
      </div>
    }

    <!-- Processing State -->
    @if (processing()) {
      <div class="flex flex-col items-center justify-center h-64 animate-pulse">
        <div class="h-16 w-16 bg-indigo-200 rounded-full mb-4 animate-bounce"></div>
        <p class="text-indigo-600 font-medium">Transcribing & Translating...</p>
      </div>
    }

    <!-- Results State -->
    @if (result(); as res) {
      <div class="flex flex-col gap-4 animate-in fade-in slide-in-from-bottom-4 duration-500">
        
        <!-- Original -->
        <app-result-card 
          label="Burmese (Original)" 
          [text]="res.transcription"
          (onSpeak)="playTts(res.transcription, 'my-MM')">
        </app-result-card>

        <!-- English -->
        <app-result-card 
          label="English Translation" 
          [text]="res.english"
          (onSpeak)="playTts(res.english, 'en-US')">
        </app-result-card>

        <!-- Chinese -->
        <app-result-card 
          label="Chinese Translation" 
          [text]="res.chinese"
          (onSpeak)="playTts(res.chinese, 'zh-CN')">
        </app-result-card>

      </div>
    }

    <!-- Error Display -->
    @if (error()) {
      <div class="mt-4 p-4 bg-red-50 text-red-600 rounded-lg text-sm text-center border border-red-100">
        {{ error() }}
      </div>
    }

  </main>

  <!-- Control Bar (Fixed Bottom) -->
  <footer class="absolute bottom-0 left-0 right-0 bg-white/80 backdrop-blur-md p-6 border-t border-slate-200 flex justify-center items-center">
    
    <div class="relative">
      <!-- Pulsing rings when recording -->
      @if (isRecording()) {
        <div class="absolute inset-0 bg-red-400 rounded-full animate-ping opacity-75"></div>
        <div class="absolute -inset-3 bg-red-200 rounded-full animate-pulse opacity-50"></div>
      }

      <!-- Main Action Button -->
      <button 
        (click)="toggleRecording()"
        [disabled]="processing()"
        class="relative z-10 h-20 w-20 rounded-full shadow-lg flex items-center justify-center transition-all duration-300 transform active:scale-95 focus:outline-none focus:ring-4 focus:ring-offset-2"
        [class.bg-red-500]="isRecording()"
        [class.hover:bg-red-600]="isRecording()"
        [class.focus:ring-red-300]="isRecording()"
        [class.bg-indigo-600]="!isRecording()"
        [class.hover:bg-indigo-700]="!isRecording()"
        [class.focus:ring-indigo-300]="!isRecording()"
        [class.opacity-50]="processing()"
        [class.cursor-not-allowed]="processing()">
        
        @if (isRecording()) {
          <!-- Stop Icon -->
          <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z" />
          </svg>
        } @else {
          <!-- Mic Icon -->
          <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z" clip-rule="evenodd" />
          </svg>
        }
      </button>
    </div>

  </footer>
</div>